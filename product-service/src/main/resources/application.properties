# Service Port
quarkus.http.port=8082

# ========================================
# MONGODB
# ========================================
quarkus.mongodb.connection-string=mongodb://admin:admin123@localhost:27017
quarkus.mongodb.database=productdb

# ========================================
# REDIS
# ========================================
quarkus.redis.hosts=redis://localhost:6379
quarkus.redis.client-type=standalone

# Redis Cache Configuration
quarkus.cache.redis.enabled=true
quarkus.cache.type=redis

# Cache TTL (Time To Live)
quarkus.cache.redis.ttl=10m
quarkus.cache.redis.expire-after-write=10m

quarkus.cache.redis.products-cache.ttl=5m
quarkus.cache.redis.product-by-id.ttl=10m
quarkus.cache.redis.products-by-category.ttl=5m
quarkus.cache.redis.products-active.ttl=5m

# ========================================
# HEALTH CHECK
# ========================================
quarkus.smallrye-health.root-path=/health

# ========================================
# METRICS
# ========================================
quarkus.micrometer.export.prometheus.enabled=true
quarkus.micrometer.export.prometheus.path=/q/metrics

# ========================================
# LOGS
# ========================================
quarkus.log.console.format=%d{HH:mm:ss} %-5p [%c{2.}] (%t) %s%e%n
quarkus.log.level=INFO
quarkus.log.category."com.ecommerce".level=DEBUG

# ========================================
# DEV MODE
# ========================================
%dev.quarkus.console.enabled=false

# ========================================
# KAFKA
# ========================================
# Bootstrap servers
kafka.bootstrap.servers=localhost:9093

# Disable Dev Services (using docker-compose)
%dev.quarkus.kafka.devservices.enabled=false

# Outgoing Channel - Product Created
mp.messaging.outgoing.product-created.connector=smallrye-kafka
mp.messaging.outgoing.product-created.topic=product-created
mp.messaging.outgoing.product-created.value.serializer=io.quarkus.kafka.client.serialization.ObjectMapperSerializer
mp.messaging.outgoing.product-created.acks=1

# Outgoing Channel - Product Updated
mp.messaging.outgoing.product-updated.connector=smallrye-kafka
mp.messaging.outgoing.product-updated.topic=product-updated
mp.messaging.outgoing.product-updated.value.serializer=io.quarkus.kafka.client.serialization.ObjectMapperSerializer
mp.messaging.outgoing.product-updated.acks=1

# Outgoing Channel - Product Deleted
mp.messaging.outgoing.product-deleted.connector=smallrye-kafka
mp.messaging.outgoing.product-deleted.topic=product-deleted
mp.messaging.outgoing.product-deleted.value.serializer=io.quarkus.kafka.client.serialization.ObjectMapperSerializer
mp.messaging.outgoing.product-deleted.acks=1

# Outgoing Channel - Stock Changed
mp.messaging.outgoing.stock-changed.connector=smallrye-kafka
mp.messaging.outgoing.stock-changed.topic=stock-changed
mp.messaging.outgoing.stock-changed.value.serializer=io.quarkus.kafka.client.serialization.ObjectMapperSerializer
mp.messaging.outgoing.stock-changed.acks=1

# ========================================
# KAFKA ERROR HANDLING
# ========================================
mp.messaging.outgoing.product-created.retries=3
mp.messaging.outgoing.product-created.retry-backoff-max-delay=10000

mp.messaging.outgoing.product-updated.retries=3
mp.messaging.outgoing.product-updated.retry-backoff-max-delay=10000

mp.messaging.outgoing.product-deleted.retries=3
mp.messaging.outgoing.product-deleted.retry-backoff-max-delay=10000

mp.messaging.outgoing.stock-changed.retries=3
mp.messaging.outgoing.stock-changed.retry-backoff-max-delay=10000