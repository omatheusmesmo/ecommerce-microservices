# Service Port
quarkus.http.port=8081

# Disable interactive console
quarkus.console.enabled=false

# ========================================
# POSTGRESQL
# ========================================
quarkus.datasource.db-kind=postgresql
quarkus.datasource.username=admin
quarkus.datasource.password=admin123
quarkus.datasource.jdbc.url=jdbc:postgresql://localhost:5432/orderdb

# ========================================
# DEV SERVICES (Disable - using docker-compose)
# ========================================
%dev.quarkus.datasource.devservices.enabled=false
%dev.quarkus.kafka.devservices.enabled=false

# ========================================
# HIBERNATE
# ========================================
# DEV - Only validate schema (Flyway manages migrations)
%dev.quarkus.hibernate-orm.database.generation=validate
%dev.quarkus.hibernate-orm.sql-load-script=no-file
%dev.quarkus.hibernate-orm.log.sql=true

# TEST - Drop and recreate (in-memory database)
%test.quarkus.hibernate-orm.database.generation=drop-and-create

# PROD - Only validate (Flyway already migrated)
%prod.quarkus.hibernate-orm.database.generation=validate
%prod.quarkus.hibernate-orm.log.sql=false

# ========================================
# FLYWAY (Controlled migrations)
# ========================================
quarkus.flyway.migrate-at-start=true
quarkus.flyway.baseline-on-migrate=true
quarkus.flyway.baseline-version=0

# ========================================
# HEALTH CHECK
# ========================================
quarkus.smallrye-health.root-path=/health

# ========================================
# METRICS
# ========================================
quarkus.micrometer.export.prometheus.enabled=true
quarkus.micrometer.export.prometheus.path=/q/metrics

# ========================================
# LOGS
# ========================================
quarkus.log.console.format=%d{HH:mm:ss} %-5p [%c{2.}] (%t) %s%e%n
quarkus.log.level=INFO
quarkus.log.category."com.ecommerce".level=DEBUG

# ========================================
# KAFKA
# ========================================
# Bootstrap servers (use port 9093 for external access)
kafka.bootstrap.servers=localhost:9093

# Outgoing Channel - Order Created
mp.messaging.outgoing.order-created.connector=smallrye-kafka
mp.messaging.outgoing.order-created.topic=order-created
mp.messaging.outgoing.order-created.value.serializer=io.quarkus.kafka.client.serialization.ObjectMapperSerializer
mp.messaging.outgoing.order-created.acks=1

# Outgoing Channel - Order Status Changed
mp.messaging.outgoing.order-status-changed.connector=smallrye-kafka
mp.messaging.outgoing.order-status-changed.topic=order-status-changed
mp.messaging.outgoing.order-status-changed.value.serializer=io.quarkus.kafka.client.serialization.ObjectMapperSerializer
mp.messaging.outgoing.order-status-changed.acks=1